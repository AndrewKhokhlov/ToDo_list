{% extends "layout.html" %}

{% block content %}
<h2>üßæ –ó–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ user.username }}</h2>

<a href="{{ url_for('main.admin_panel') }}" class="btn btn-secondary mb-3">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a>

<!-- –°–µ–∫—Ü–∏—è –¥–ª—è –∑–∞–¥–∞—á –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ -->
<h3>üìã –í –ø—Ä–æ—Ü–µ—Å—Å–µ ({{ todo_tasks|length }})</h3>
{% if todo_tasks %}
<table class="table table-hover">
    <thead>
        <tr>
            <th style="width: 25%;">–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th style="width: 20%;">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
    {% for task in todo_tasks %}
        <tr>
            <td>{{ task.title }}</td>
            <td>{{ task.content }}</td>
            <td>
                <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô url_for -->
                <a href="{{ url_for('main.admin_edit_task', task_id=task.id) }}" class="btn btn-sm btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô url_for -->
                <form action="{{ url_for('main.admin_delete_task', task_id=task.id) }}" method="post" style="display:inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?');">
                    <button class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á.</p>
{% endif %}


<!-- –°–µ–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á -->
<h3 class="mt-4">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ ({{ done_tasks|length }})</h3>
{% if done_tasks %}
<table class="table table-hover table-striped">
    <thead>
        <tr>
            <th style="width: 25%;">–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th style="width: 20%;">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
    {% for task in done_tasks %}
        <tr class="table-success">
            <td><s>{{ task.title }}</s></td>
            <td><s>{{ task.content }}</s></td>
            <td>
                <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô url_for -->
                <a href="{{ url_for('main.admin_edit_task', task_id=task.id) }}" class="btn btn-sm btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô url_for -->
                <form action="{{ url_for('main.admin_delete_task', task_id=task.id) }}" method="post" style="display:inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?');">
                    <button class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>–ù–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.</p>
{% endif %}

{% endblock %}
